<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../paper-input/paper-input.html">
<link rel="import" href="../paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../paper-item/paper-item.html">
<link rel="import" href="../paper-listbox/paper-listbox.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../iron-form/iron-form.html">
<link rel="import" href="../iron-icons/iron-icons.html">
<link rel="import" href="../vaadin-date-picker/vaadin-date-picker.html">
<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../gl-styles/gl-color.html">




<!--
`gl-search-input`


@demo demo/index.html 
-->

<dom-module id="gl-search-input">
    <template>
    <style include="iron-flex iron-flex-alignment iron-flex-factors gl-color">
      .width{
          width:100%;
      }
      .text{
          /*border: 1px solid #000;*/
          font-size:16px;
          padding-top:31px;
          /*height: 25px;*/
      }
      .button {
          margin:15px;
      }
    </style>
    
     <div class="layout vertical">
         <form is="iron-form" id="searchInput" method="get" >
            <template is="dom-if" if={{searchInput}}>
                <div class="layout horizontal">
                    <div class="flex">
                        <div class="text">ค้นหา :</div> 
                    </div>
                    <div class="flex-3">
                        <paper-input label="ค้นหา" name="searchName" value="{{search}}" class="width">
                            <!--<iron-icon icon="search" suffix></iron-icon>-->
                        </paper-input>
                    </div>
                </div>
            </template>
            
            <template is="dom-if" if={{searchInputType}}>
                <div class="layout horizontal">
                    <div class="flex">
                        <div class="text">ค้นหาตาม :</div> 
                    </div>
                    <div class="flex-3">
                        <paper-dropdown-menu label="ค้นหาตาม" name="searchType" class="width">
                            <paper-listbox class="dropdown-content" >
                                <template is="dom-repeat" items={{searchType}} as=item index-as=index>
                                    <paper-item value="{{item.name}}" >{{item.name}} </paper-item>
                                </template>
                            </paper-listbox>
                        </paper-dropdown-menu>
                    </div>
                </div>
            </template>
            
         
         <template is="dom-if" if={{searchDataStart}}>
             <div class="layout horizontal">
                <div class="flex">
                    <div class="text">เริ่มจากวันที่ :</div> 
                </div>
                <div class="flex-3">
                    <vaadin-date-picker name="searchStart"></vaadin-date-picker>
                </div>
            </div>
         </template>
         
         <template is="dom-if" if={{searchDataEnd}}>
             <div class="layout horizontal">
                <div class="flex">
                    <div class="text">จนถึงวันที่ :</div> 
                </div>
                <div class="flex-3">
                    <vaadin-date-picker name="searchEnd"></vaadin-date-picker>
                </div>
            </div>
         </template>
         

         

      </form>
     
     </div>
   
     <div class="horizontal center-justified layout button">
           <paper-button raised on-tap="_searchKey" class="gl-btn-info">ค้นหา</paper-button>
      </div>
   


    </template>

    <script>
        Polymer({
            is: 'gl-search-input',
            properties: {
                
                search: {
                    type: String,
                },
                searchType: {
                    type: Object,
                    value: [{
                        id: 1,
                        name: 'allosaurus'
                    }, {
                        id: 2,
                        name: 'brontosaurus'
                    }, {
                        id: 3,
                        name: 'carcharodontosaurus'
                    }, {
                        id: 4,
                        name: 'diplodocus'
                    }, ]
                },
                result: {
                    type: Object,
                    notify: true
                },
                searchInput:{
                    type: Boolean,
                    value: true
                },
                searchInputType:{
                    type: Boolean,
                    value: true
                },
                searchDataStart:{
                    type: Boolean,
                    value: false
                },
                searchDataEnd:{
                    type: Boolean,
                    value: false
                },

            },
            listeners: {
                'iron-form-submit': '_submitData',
            },
            _searchKey:function (event) {
                this.$.searchInput.submit();
                // console.log(this.$.searchInput);
                // Polymer.dom(event).localTarget.parentElement.submit();
                // console.log(this.$.car.value);
            },
            _submitData:function (event) {
                // console.log(JSON.stringify(event.detail));
                console.log(this.result = event.detail);
            }

        });
    </script>
</dom-module>