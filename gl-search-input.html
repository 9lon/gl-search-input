<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../paper-input/paper-input.html">
<link rel="import" href="../paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../paper-item/paper-item.html">
<link rel="import" href="../paper-listbox/paper-listbox.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../iron-form/iron-form.html">
<link rel="import" href="../iron-icons/iron-icons.html">
<link rel="import" href="../vaadin-date-picker/vaadin-date-picker.html">
<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../gl-styles/gl-color.html">




<!--
`gl-search-input`


@demo demo/index.html 
-->

<dom-module id="gl-search-input">
    <template>
        <style include="iron-flex iron-flex-alignment iron-flex-factors gl-color">
            :host {
                --gl-inout-width: 100%;
            }
            
            .width {
                width: var(--gl-inout-width);
            }
            
            .text {
                text-align: right;
                margin: 0px 4px 0px 4px;
                font-size: 16px;
                padding-top: 31px;
            }
            
            .button {
                margin: 15px;
            }
            
            .bd {
                border: 1px solid #000;
            }
        </style>

        <div class="layout vertical">
            <form is="iron-form" id="searchInput" method="get">
                <div class="layout horizontal">
                    <div class="flex">
                        <template is="dom-if" if={{searchInput}}>
                            <div class="layout horizontal">
                                <div class="flex">
                                    <div class="text">{{searchLabelName}} :</div>
                                </div>
                                <div class="flex-3">
                                    <paper-input label="{{searchLabelName}}" name="searchName" value="{{search}}" class="width">
                                        <!--<iron-icon icon="search" suffix></iron-icon>-->
                                    </paper-input>
                                </div>
                            </div>
                        </template>
                    </div>
                    <div class="flex">
                        <template is="dom-if" if={{searchInputType}}>
                            <div class="layout horizontal">
                                <div class="flex">
                                    <div class="text">{{searchLabelType}} :</div>
                                </div>
                                <div class="flex-3">
                                    <paper-dropdown-menu label="ทั้งหมด" name="searchType" class="width">
                                        <paper-listbox class="dropdown-content">
                                            <template is="dom-repeat" items={{searchType}} as=item index-as=index>
                                                <paper-item value="{{item.name}}">{{item.name}} </paper-item>
                                            </template>
                                        </paper-listbox>
                                    </paper-dropdown-menu>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>
                <div class="layout horizontal">
                    <template is="dom-if" if={{searchData}}>
                        <div class="flex">

                            <div class="layout horizontal">
                                <div class="flex">
                                    <div class="text">เริ่มจากวันที่ :</div>
                                </div>
                                <div class="flex-3">
                                    <vaadin-date-picker name="searchStart" class="width"></vaadin-date-picker>
                                </div>
                            </div>
                        </div>
                        <div class="flex">
                            <div class="layout horizontal">
                                <div class="flex">
                                    <div class="text">จนถึงวันที่ :</div>
                                </div>
                                <div class="flex-3">
                                    <vaadin-date-picker name="searchEnd" class="width"></vaadin-date-picker>
                                </div>
                            </div>
                        </div>
                    </template>
                </div>
            </form>
        </div>

        <div class="horizontal center-justified layout button">
            <paper-button raised on-tap="_searchKey" class="gl-btn-info">ค้นหา</paper-button>
        </div>



    </template>

    <script>
        Polymer({
            is: 'gl-search-input',
            properties: {
                searchLabelName:{
                    type: String,
                    value:'ค้นหา'
                },
                searchLabelType:{
                    type: String,
                    value:'ค้นหาตาม'
                },
                search: {
                    type: String,
                },
                searchType: {
                    type: Object,
                    value: [{
                        id: 1,
                        name: 'allosaurus'
                    }, {
                        id: 2,
                        name: 'brontosaurus'
                    }, {
                        id: 3,
                        name: 'carcharodontosaurus'
                    }, {
                        id: 4,
                        name: 'diplodocus'
                    }, ]
                },
                result: {
                    type: Object,
                    notify: true
                },
                searchInput:{
                    type: Boolean,
                    value: true
                },
                searchInputType:{
                    type: Boolean,
                    value: true
                },
                searchData:{
                    type: Boolean,
                    value: false
                }
            },
            listeners: {
                'iron-form-submit': '_submitData',
            },
            _searchKey:function (event) {
                this.$.searchInput.submit();
            },
            _submitData:function (event) {
                // console.log(JSON.stringify(event.detail));
                this.result = event.detail
            }

        });
    </script>
</dom-module>